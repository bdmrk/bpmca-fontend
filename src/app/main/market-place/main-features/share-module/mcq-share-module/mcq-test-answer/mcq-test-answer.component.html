<mat-expansion-panel *ngFor="let data of dataset; let i = index">
  <mat-expansion-panel-header>
      <span> Exam : {{ i + 1 }} </span>&nbsp; &nbsp; &nbsp; | &nbsp; &nbsp;
      &nbsp;
      <span> Created at : {{ data.created_at | date }} </span>&nbsp;
      &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;
      <span> Time : {{ data.time }} sec</span> &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;
      <span> Correct : {{ data.right }}</span>&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;
      <span> Wrong : {{ data.wrong }}</span>&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;
      <span> Skipped : {{ data.skipped }}</span>&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;
      <span> Score : {{ data.answers && data.right > 0 ? ( (data.right / data.answers.length) * 100 ).toFixed(2): "0"}}%</span>
  </mat-expansion-panel-header>

  <ng-template matExpansionPanelContent>
    <div class="row">
      <div class="quiz-summary col-md-12">
          <div class="row">
            <div class="col-xs-6 col-sm-3">
                <div class="quiz-correct">
                    Correct<br> {{ data.right }}/{{ data.answers?.length }}
                </div>
            </div>
            <div class="col-xs-6 col-sm-3">
                <div class="quiz-wrong">
                    Wrong<br> {{ data.wrong }}
                </div>    
            </div>  
            <div class="col-xs-6 col-sm-3">
                <div class="quiz-skipped">
                    Skipped<br> {{ data.skipped }}
                </div>    
            </div>    
            <div class="col-xs-6 col-sm-3">
                <div class="quiz-score">
                    Score<br>
                    {{
                        data.answers && data.right > 0
                            ? ( (data.right / data.answers.length) * 100 ).toFixed(2)
                            : "0"
                    }}
                    %
                </div>    
            </div> 
           </div> 
         <div class="row m-t-30">
            <div *ngFor="let value of data.answers; let j = index">
                <mat-card class="m-b-20">   
                    
                    <div class="question-title">
                        <span>{{ j + 1 }}.</span> <span [innerHTML]="value.questions.question_title"></span>
                    </div>
 
                    <div class="row">
                        <div class="col-xs-12 col-md-6">
                            <div class="mcqOptions">
                                <mat-radio-group>
                                    <mat-radio-button
                                        [ngClass]="[
                                            (value.givenAnswer ===
                                                value.questions.answer &&
                                                value.givenAnswer === '1') ||
                                            value.questions.answer === '1'
                                                ? 'right-answer'
                                                : '',
                                            value.givenAnswer !==
                                                value.questions.answer &&
                                            value.givenAnswer === '1'
                                                ? 'wrong-answer'
                                                : ''
                                        ]"
                                        disabled="disabled"
                                        [value]="1"
                                        [checked]="
                                            value.givenAnswer &&
                                            value.givenAnswer !== '-1' &&
                                            value.givenAnswer === '1'
                                                ? true
                                                : false
                                        "
                                    >
                                        <span
                                            *ngIf="
                                                value.questions.options.option1;
                                                else image_option_1
                                            "
                                            ><span [innerHTML]="value.questions.options.option1"></span></span
                                        >
                                        <ng-template #image_option_1
                                            ><img
                                                [src]="
                                                    aws_link +
                                                    value.questions.options.image_option_1
                                                "
                                            />
                                        </ng-template>
                                    </mat-radio-button>
                                    <mat-radio-button
                                        [ngClass]="[
                                            (value.givenAnswer ===
                                                value.questions.answer &&
                                                value.givenAnswer === '2') ||
                                            value.questions.answer === '2'
                                                ? 'right-answer'
                                                : '',
                                            value.givenAnswer !==
                                                value.questions.answer &&
                                            value.givenAnswer === '2'
                                                ? 'wrong-answer'
                                                : ''
                                        ]"
                                        disabled="disabled"
                                        [value]="2"
                                        [checked]="
                                            value.givenAnswer &&
                                            value.givenAnswer !== '-1' &&
                                            value.givenAnswer === '2'
                                                ? true
                                                : false
                                        "
                                    >
                                        <span
                                            *ngIf="
                                                value.questions.options.option2;
                                                else image_option_2
                                            "
                                            ><span [innerHTML]="value.questions.options.option2"></span></span
                                        >
                                        <ng-template #image_option_2
                                            ><img
                                                [src]="
                                                    aws_link +
                                                    value.questions.options.image_option_2
                                                "
                                                [ngClass]="imageOption"
                                            />
                                        </ng-template>
                                    </mat-radio-button>
                                    <mat-radio-button
                                        [ngClass]="[
                                            (value.givenAnswer ===
                                                value.questions.answer &&
                                                value.givenAnswer === '3') ||
                                            value.questions.answer === '3'
                                                ? 'right-answer'
                                                : '',
                                            value.givenAnswer !==
                                                value.questions.answer &&
                                            value.givenAnswer === '3'
                                                ? 'wrong-answer'
                                                : ''
                                        ]"
                                        disabled="disabled"
                                        [value]="3"
                                        [checked]="
                                            value.givenAnswer &&
                                            value.givenAnswer !== '-1' &&
                                            value.givenAnswer === '3'
                                                ? true
                                                : false
                                        "
                                    >
                                        <span
                                            *ngIf="
                                                value.questions.options.option3;
                                                else image_option_3
                                            "
                                            ><span [innerHTML]="value.questions.options.option3"></span></span
                                        >
                                        <ng-template #image_option_3
                                            ><img
                                                [src]="
                                                    aws_link +
                                                    value.questions.options.image_option_3
                                                "
                                            />
                                        </ng-template>
                                    </mat-radio-button>
                                    <mat-radio-button
                                        [ngClass]="[
                                            (value.givenAnswer ===
                                                value.questions.answer &&
                                                value.givenAnswer === '4') ||
                                            value.questions.answer === '4'
                                                ? 'right-answer'
                                                : '',
                                            value.givenAnswer !==
                                                value.questions.answer &&
                                            value.givenAnswer === '4'
                                                ? 'wrong-answer'
                                                : ''
                                        ]"
                                        disabled="disabled"
                                        [value]="4"
                                        [checked]="
                                            value.givenAnswer &&
                                            value.givenAnswer !== '-1' &&
                                            value.givenAnswer === '4'
                                                ? true
                                                : false
                                        "
                                    >
                                        <span
                                            *ngIf="
                                                value.questions.options.option4;
                                                else image_option_4
                                            "
                                            ><span [innerHTML]="value.questions.options.option4"></span></span
                                        >
                                        <ng-template #image_option_4
                                            ><img
                                                [src]="
                                                    aws_link +
                                                    value.questions.options.image_option_4
                                                "
                                            />
                                        </ng-template>
                                    </mat-radio-button>
                                </mat-radio-group>  
                            </div>
                        </div>
                        <div class="col-xs-12 col-md-6">
                            <div class="question-body-img">
                              <img *ngIf="value.questions.question_image" [src]="aws_link+value.questions.question_image"/>
                            </div>  
                        </div>
                    </div>        
                </mat-card>
            </div> 
         </div>
      </div>  
    </div>   
  </ng-template>
</mat-expansion-panel>

<ng-container *ngIf="dataset && dataset.length <= 0">
    <h2 class="center-text">No exam found</h2>
</ng-container>